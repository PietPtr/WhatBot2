

var QuoteModule = function(){
	var self = this;
	self.client = null;

	var fs = require('fs');

	self.quoteListener = function(from, to, message) {
		if (message == '!quote') {
			fs.readFile(__dirname + '/textList', function(err, data) {
				if (err) {
					throw err;
				}

				var messages = data.toString().split("\n");
				self.client.say(to, "'" + messages[randomInt(0, messages.length)] + "'");
				console.log("said")
			});
		}	
	}
	/**
   * Unloads all listeners
  */
  self.unload = function(client) {
    client.removeListener('message', self.quoteListener);
  };

  /**
   * Loads all listeners
  */
  self.load = function(client) {
    client.addListener('message', self.quoteListener);
    self.client = client;
  };

}

function randomInt(low, high) {
  return Math.floor(Math.random() * (high - low + 1) + low);
}

module.exports = new QuoteModule();